# ==============================================================================
# IoT2 Mosquitto Broker â€” TLS + Password Authentication (Windows)
# ==============================================================================
# Deploy: copy to "C:\Program Files\mosquitto\mosquitto.conf"
#         or include via: include_dir C:\Program Files\mosquitto\conf.d
#
# Prerequisites:
#   1. Copy certs to: C:\Program Files\mosquitto\certs\
#      - ca.crt, server.crt, server.key (from e:\IoT2\certs\)
#   2. Create password file (in mosquitto install dir, run as Admin):
#        mosquitto_passwd -c passwd iot2_esp32
#        mosquitto_passwd    passwd iot2_sender
#   3. Restart service:
#        net stop mosquitto && net start mosquitto
# ==============================================================================

# ---- TLS listener (production) ----
listener 8883
cafile   E:\IoT2\certs\ca.crt
certfile E:\IoT2\certs\server.crt
keyfile  E:\IoT2\certs\server.key
tls_version tlsv1.2

# ---- Authentication ----
allow_anonymous false
password_file C:\Program Files\mosquitto\passwd

# ---- Local plaintext listener (debug only, localhost only) ----
listener 1883 127.0.0.1
allow_anonymous true

# ---- Logging ----
log_type warning
log_type error
log_type notice
connection_messages true
